---
if (Astro.cookies.has('admin_session')) return Astro.redirect('/admin');
---
<html lang='es'>
<head><meta charset='utf-8' /><title>Login Admin</title><meta name='viewport' content='width=device-width' /></head>
<body class='bg-black text-white h-screen flex items-center justify-center font-mono'>
    <div class='w-full max-w-sm p-8 border border-white/10 rounded-2xl bg-zinc-900/50 backdrop-blur'>
        <div class='mb-6 text-center'><h1 class='text-xl font-bold tracking-tight'>SYSTEM ACCESS</h1></div>
        <form id='loginForm' class='space-y-4'>
            <input type='text' name='username' placeholder='USER' class='w-full bg-black border border-white/20 rounded px-3 py-2 text-white outline-none focus:border-purple-500' />
            <input type='password' name='password' placeholder='KEY' class='w-full bg-black border border-white/20 rounded px-3 py-2 text-white outline-none focus:border-purple-500' />
            <div id='error' class='text-red-500 text-xs hidden text-center'>Acceso denegado</div>
            <button type='submit' class='w-full bg-white text-black font-bold py-2 rounded hover:bg-zinc-200 transition mt-2'>ENTER</button>
        </form>
    </div>
    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const res = await fetch('/api/admin/auth', { method: 'POST', body: JSON.stringify(Object.fromEntries(new FormData(e.target))) });
            if (res.ok) window.location.href = '/admin'; else document.getElementById('error').classList.remove('hidden');
        });
    </script>
</body>
</html>
